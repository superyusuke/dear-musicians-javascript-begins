# コードは文字から成る

かなり駆け足で説明をしてきた。その理由は、一般的な教科書のように基礎的なことから説明するよりも、サウンドに直結するところから話が始まった方が面白いと思ったからだ。

しかし、そろそろ少し退屈だが、重要な、JavaScript の基礎について探求する必要がある。

### コードは文字の組み合わせ

今更だけど、コードは文字の組み合わせでできている。つまりコードは**本質的には単なる「テキスト」**だ。だから、専門の開発ツールを使わなくても、シンプルなテキストエディターでも開発ができる。

```javascript
const audioContext = new AudioContext()
const osc = audioContext.createOscillator()
osc.type = 'sine'
osc.frequency.value = 880
osc.connect(audioContext.destination)
osc.start()
```

### JavaScript のインタプリタがコード＝テキストを理解して実行する

ではなぜ単なるテキストがプログラムとして機能して、様々な仕事を実行してくれるのだろうか。そして誰が実行しているのだろうか。

### インタプリタによる字句\(token\)への分解

まずソースコードを読んで、解釈し、実行するのは JavaScript の**「インタプリタ」**の役割だ。インタプリタは、最初にテキストをプログラムとしての最小単位である**「token \(字句\)」**に分解する。「私は中西です」という文章を「私、は、中西、です」と品詞に分解するようなものだ。

例えば次のようなコードを token \(字句\) に分解してみよう。

```javascript
const a = 1 + 2
```

これをトークンに分解すると、以下のように `|` の部分で区切ることができる。

```javascript
| const | a | = | 1 | + | 2 |
```

### 字句構造 \(lexical structure\) に適合しているかチェックする

分解したがいいが、これがプログラムとして正しく意味を成していなくては実行できない。「です。中西。私は。」と区切れる文章があったとしても、これは意味はなさない。文法としておかしいからだ。

この token \(字句\) に期待される正しいルールを **「lexical structure \(字句構造\)」** という。そしてそれに適合しているかチェックすることを**「構文解析\(Parse\)」**という。 Parse をして、問題がなければ、JavaScript のインタプリタは実行するための準備を終え次第、プログラムを実行する。

### もう一度ストーリーに沿って

次のコードが JavaScript のインタプリタに実行されるまでの流れをみてみよう。

```javascript
const a = 1 + 2
```

まずは字句に分割する。「私、は、中西、です」

```javascript
| const | a | = | 1 | + | 2 |
```

字句の並び方が字句構造に適している。つまり文法にあった書き方がされていることを確認する。これが構文解析 \(Parse\) だった。よし、言葉の順番は、ちゃんと理解できる整合性を持っている。

### トークンを区切るのは基本的に空白

空白がトークンを区切る基本的な要素だ。だから `const a` に含まれる const と a の間にある空白をなくしてはいけない。空白をなくすと以下のようになるが、これでは、`consta` という変数として理解されてしまう。

```javascript
consta=1+2
```

### Operator \(= + - /\) などは空白と同じくトークンに区切る効果がある

`const` と `a` の間の空白はなくしてはいけなかった。空白がトークンを区切る役目をしていたからである。

しかし、「`= + - /`」などの演算子 \(Operator\) と呼ばれる要素は、空白文字と同じく、トークンに区切る効果がある。だから次のように、空白をなくしてしまってもいい。それぞれ、`a` と `1` の間にある `=` 、`1` と 2 の間にある `+` が、区切る役目をするからだ。

```javascript
const a=1+2
```

### 他にもトークンを区切る効果のある要素はある

他にもトークンを区切る効果のある要素はあるが、雰囲気で感じて欲しい。

### 正しい文法で書かれたテキストがコードとして実行される

とにかく、プログラマが書いているのは単なるテキストで、ただし各プログラミング言語の文法に則ったものだ。それをインタプリタが解釈をして、実行する、ルールに適合していなければ、エラーが出る。

